To create the docker image, run

```
sudo docker build -t ds_283_prod .
```


## With Service Account

If you have a service account, then

```
sudo docker run -it -v PATH_TO_SERVICE_CREDENITIALS.json:/app/.credentials -e GOOGLE_APPLICATION_CREDENTIALS=/app/.credentials ds_283_prod
```


And that ought be it! The dashboard is copied to `gs://moz-fx-data-prod-analysis/sguha/ds_283/`.



## With Email Based Credentials

Now for testing, I mount my `gargle` cached authentifications(and other google auths too)  into the container and run it like so
(you might not  need sudo) but you need to edit the `run.sh` file before (and rebuild using the above command) like so

```
#!/bin/bash

BUCKET=moz-fx-data-prod-analysis

Rscript -e "setwd('/webrender_intel_win10_nightly');library(rmarkdown); render('driver.Rmd');render('dashboard.Rmd',output_dir='/tmp/output/')"
gsutil -m  rsync -r -d /tmp/output/   gs://$BUCKET/sguha/ds_283/
gsutil -m  rsync -r  /webrender_intel_win10_nightly/driver.html   gs://$BUCKET/sguha/ds_283/
```

and then

```

sudo docker run -it  -v ~/.R:/root/.R  -v ~/.config:/root/.config ds_283_prod

```
